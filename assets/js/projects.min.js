jQuery(document).ready(function(){var a=false;var g=false;jQuery(".mytask").click(function(){jQuery(this).closest("form").submit()});jQuery(".futuretask").click(function(){jQuery(this).closest("form").submit()});jQuery(".search_start_date").change(function(){jQuery(this).closest("form").submit()});jQuery(".search_status").change(function(){jQuery(this).closest("form").submit()});jQuery(".search_project_id").change(function(){jQuery(this).closest("form").submit()});jQuery(".search_type_id").change(function(){jQuery(this).closest("form").submit()});jQuery(".search_milestone_id").change(function(){jQuery(this).closest("form").submit()});jQuery(".search_priority_id").change(function(){jQuery(this).closest("form").submit()});jQuery(".task-assigned-to input").click(function(){return e(jQuery(this))});jQuery(".manage-subtasks-link").click(function(){if(g){jQuery(".manage-subtasks").hide();g=false}else{jQuery(".manage-subtasks").show();g=true}is_modified=true;jQuery(".task-submit-button").show()});jQuery(".advanced-search").click(function(){if(a){jQuery(".all-fields").hide();a=false}else{jQuery(".all-fields").show();a=true}});jQuery(".change-status").click(function(){return c(jQuery(this),"status")});jQuery(".change-type").click(function(){return c(jQuery(this),"type_id")});jQuery(".change-project").click(function(){return c(jQuery(this),"project_id")});jQuery(".change-milestone").click(function(){return c(jQuery(this),"milestone_id")});jQuery(".change-priority").click(function(){return c(jQuery(this),"priority_id")});jQuery(".close_open_task").click(function(){return f(jQuery(this))});jQuery(".close_open_subtask").click(function(){return d(jQuery(this))});function c(l,k){var i=l.attr("task_id");var h=l.attr(k);var j="form["+k+"]";var o=l.attr("label");var n=l.closest(".task-setting");var m={"form[id]":i};m["form["+k+"]"]=h;kazist.addSpinningIcon(n);kazist.callAjaxByRoute("projects.tasks.save",m,true);n.find(".task-setting-label").text(o);n.removeClass("open");kazist.removeSpinningIcon(n);return false}function f(j){var h=j.attr("task_id");var i=j.attr("closed");var l=j.attr("label");var k={"form[id]":h,"form[closed]":i};kazist.addSpinningIcon(j);kazist.callAjaxByRoute("projects.tasks.save",k,false);j.find(".close_open_label").text(l);if(j.hasClass("btn-danger")){j.removeClass("btn-danger");j.addClass("btn-default")}else{j.removeClass("btn-default");j.addClass("btn-danger")}kazist.removeSpinningIcon(j);return false}function d(j){var m=j.attr("subtask_id");var h=j.attr("closed");var l=j.attr("label");var i=kazist_document.current_url;var k={"form[id]":m,"form[closed]":h,"form[return_url]":btoa(i)};kazist.addSpinningIcon(j);kazist.callAjaxByRoute("projects.tasks.subtasks.save",k,false);j.find(".close_open_subtask_label").text(l);if(j.hasClass("btn-danger")){j.removeClass("btn-danger");j.addClass("btn-default")}else{j.removeClass("btn-default");j.addClass("btn-danger")}kazist.removeSpinningIcon(j);return false}function e(j){var i=jQuery(".task-single-form #id").val();var m=j.val();var h=j.attr("name");var l=j.closest("li");var k={"form[id]":i};k[h]=m;kazist.addSpinningIcon(l);kazist.callAjaxByRoute("projects.tasks.save",k,false);kazist.removeSpinningIcon(l)}function b(){jQuery(".task-single-form").submit()}});